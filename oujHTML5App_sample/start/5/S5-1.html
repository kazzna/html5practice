<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<title>5-1</title>
		<style>
			/*ここはCSSのエリア*/
			#mycanvas {
				border: 4px inset gainsboro;
			}
		</style>

	</head>

	<body>

		<!-- ページに表示するコンテンツのグループ -->
		
		<canvas id="mycanvas" width="300" height="300"></canvas>
		
		<script>
			var canvas = document.getElementById("mycanvas");
			var c = canvas.getContext("2d");

			// ここに図形の描画のコードを記述します。
			var random16 = function() {
				var a = parseInt(Math.random() * 256).toString(16);
				return ("0" + a).slice(-2);
			};
			
			var draw = function(e){
				setTimeout(function() {
					var rect = e.target.getBoundingClientRect();
					var pos = {};
					pos.x = e.clientX - rect.left;
					pos.y = e.clientY - rect.top;
					var r = random16();
					var g = random16();
					var b = random16();
					c.fillStyle = "#" + r + g + b;
					c.fillRect(pos.x - 8, pos.y - 8, 4, 4);
				}, Math.random() * 3000);
			};
			
			canvas.addEventListener("mousedown", function() {
				canvas.addEventListener("mousemove", draw, false);
			}, false);

			canvas.addEventListener("mouseup", function() {
				canvas.removeEventListener("mousemove", draw, false);
			}, false);
		</script>
	</body>
</html>
